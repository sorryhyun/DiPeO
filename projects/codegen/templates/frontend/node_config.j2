// Auto-generated node configuration for {{ nodeType }}
import type { UnifiedNodeConfig } from '@/infrastructure/config/unifiedConfig';
import { NodeType, HandleLabel, MemoryProfile, ToolSelection, HookType, HttpMethod, SupportedLanguage, HookTriggerMode } from '@dipeo/models';
import { {{ nodeTypeCamel }}Fields } from '../fields/{{ nodeTypePascal }}Fields';
{%- if nodeType == 'integrated_api' %}
import { mergeFieldConfigs } from '@/domain/diagram/config/nodes/fieldOverrides';

// Apply field overrides to get dynamic options
const fieldsWithOverrides = mergeFieldConfigs('integrated_api');
{%- endif %}

export const {{ nodeTypeCamel }}Config: UnifiedNodeConfig = {
  label: '{{ displayName }}',
  icon: '{{ icon }}',
  color: '{{ color | default('#6366f1') }}',
  nodeType: NodeType.{{ nodeType | replace('-', '_') | upper }},
  category: '{{ category | default('utility') }}',
  handles: {
{%- if handles and handles.inputs %}
    input: [
{%- for input in handles.inputs %}
      { label: HandleLabel.{{ input.label | default('default') | upper }}, displayLabel: '{{ input.displayLabel | default('') }}', position: '{{ input.position | default('left') }}' },
{%- endfor %}
    ],
{%- endif %}
{%- if handles and handles.outputs %}
    output: [
{%- for output in handles.outputs %}
      { label: HandleLabel.{{ output.label | default('default') | upper }}, displayLabel: '{{ output.displayLabel | default('') }}', position: '{{ output.position | default('right') }}' },
{%- endfor %}
    ],
{%- endif %}
  },
  defaults: {
{%- for field in fields if field.default is defined %}
{%- if field.name == 'memory_profile' %}
    {{ field.name }}: MemoryProfile.{{ field.default }},
{%- elif field.name == 'tools' %}
    {{ field.name }}: ToolSelection.{{ field.default | upper }},
{%- elif field.name == 'hook_type' %}
    {{ field.name }}: HookType.{{ field.default | upper }},
{%- elif field.name == 'http_method' %}
    {{ field.name }}: HttpMethod.{{ field.default | upper }},
{%- elif field.name == 'language' %}
    {{ field.name }}: SupportedLanguage.{{ field.default | upper }},
{%- elif field.name == 'trigger_mode' %}
    {{ field.name }}: HookTriggerMode.{{ field.default | upper }},
{%- elif field.default is string %}
    {{ field.name }}: '{{ field.default }}',
{%- elif field.default is boolean %}
    {{ field.name }}: {{ field.default | lower }},
{%- else %}
    {{ field.name }}: {{ field.default | tojson }},
{%- endif %}
{%- endfor %}
  },
{%- if nodeType == 'integrated_api' %}
  customFields: fieldsWithOverrides,
{%- else %}
  customFields: {{ nodeTypeCamel }}Fields,
{%- endif %}
{%- if primaryDisplayField %}
  primaryDisplayField: '{{ primaryDisplayField }}',
{%- endif %}
};

export default {{ nodeTypeCamel }}Config;