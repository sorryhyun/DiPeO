version: light
nodes:
- label: Start
  type: start
  position: {x: 100, y: 100}
  props:
    trigger_mode: manual
    custom_data:
      session_id: 78b82f29-b6f0-40c1-aff8-f6dba37695ac
      initial_prompt: 'Caveat: The messages below were generated by the user while running local commands. DO NOT respond to these messages or otherwise consider them in your response unless the user explicitly asks you to.'
- label: User Input 1
  type: person_job
  position: {x: 350, y: 100}
  props:
    person: user
    default_prompt: |-
      <command-name>/clear</command-name>
                  <command-message>clear</command-message>
                  <command-args></command-args>
    max_iteration: 1
- label: User Input 2
  type: person_job
  position: {x: 400, y: 100}
  props:
    person: user
    default_prompt: <local-command-stdout></local-command-stdout>
    max_iteration: 1
- label: Grep Search 3
  type: code_job
  position: {x: 450, y: 100}
  props:
    language: bash
    code: rg -n 'pyinstaller.*--name' .
    tool: Grep
    description: Grep search operation
- label: Read File 4
  type: db
  position: {x: 500, y: 100}
  props:
    operation: read
    sub_type: file
    file: /home/soryhyun/DiPeO/.github/workflows/build-windows.yml
- label: Edit File 5
  type: diff_patch
  position: {x: 550, y: 100}
  props:
    target_path: /home/soryhyun/DiPeO/.github/workflows/build-windows.yml
    diff: |
      {'oldStart': 176, 'oldLines': 7, 'newStart': 176, 'newLines': 7, 'lines': ['           $env:BUILD_TYPE = "SERVER"', ' ', '           # Build with PyInstaller using unified spec', '-          pyinstaller --clean dipeo/build-windows.spec --name dipeo-server --distpath apps/server/dist', '+          pyinstaller --clean dipeo/build-windows.spec --distpath apps/server/dist', ' ', '           # Verify build', '           if (!(Test-Path "apps\\server\\dist\\dipeo-server.exe")) {']}
    format: unified
    backup: true
    validate: true
    _original_file_hash: 8724970705705729677
- label: Grep Search 6
  type: code_job
  position: {x: 600, y: 100}
  props:
    language: bash
    code: rg -n 'pyinstaller.*--name' .github/workflows/build-windows.yml
    tool: Grep
    description: Grep search operation
connections:
- {from: Start, to: User Input 1, content_type: raw_text}
- {from: User Input 1, to: User Input 2, content_type: raw_text}
- {from: User Input 2, to: Grep Search 3, content_type: raw_text}
- {from: Grep Search 3, to: Read File 4, content_type: raw_text}
- {from: Read File 4, to: Edit File 5, content_type: raw_text}
- {from: Edit File 5, to: Grep Search 6, content_type: raw_text}
persons:
  user:
    service: openai
    model: user
    api_key_id: USER_INPUT
metadata:
  preprocessing:
    session_event_pruning:
      applied: true
      events_pruned: 1
      pruning_time_ms: 0.028371810913085938
      changes:
      - type: node_removed
        description: 'Pruned user event: No matches found result'
        target: 6b925df2-ed07-4046-8c12-cb8f166cf4b4
  conversion:
    total_nodes: 7
    total_connections: 6
    total_persons: 1
    node_types:
      start: 1
      person_job: 2
      code_job: 2
      db: 1
      diff_patch: 1
