version: light
nodes:
- label: Start
  type: start
  position: {x: 100, y: 100}
  props:
    trigger_mode: manual
    custom_data:
      session_id: 4d604870-b2e7-48e3-b50c-b3d188e4da04
      initial_prompt: |-
        <command-name>/clear</command-name>
                    <command-message>clear</command-message>
                    <command-args></command-args>
- label: Update TODO 1
  type: db
  position: {x: 300, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Create infrastructure/cc_translate/adapters/ directory
        activeForm: Creating adapters directory
        status: pending
      - content: Create ClaudeCodeSessionAdapter for converting infrastructure to domain models
        activeForm: Creating session adapter
        status: pending
      - content: Create DiagramOutputAdapter for converting domain diagram to output format
        activeForm: Creating diagram output adapter
        status: pending
      - content: Update CLI commands to use adapters
        activeForm: Updating CLI commands
        status: pending
      - content: Update API endpoints to use adapters
        activeForm: Updating API endpoints
        status: pending
      - content: Test adapter integration
        activeForm: Testing adapter integration
        status: pending
- label: prev_to_do_sub
  type: sub_diagram
  position: {x: 500, y: 100}
  props:
    sub_diagram_path: grouped/prev_to_do.light.yaml
    execution_mode: sequential
- label: Update TODO 2
  type: db
  position: {x: 700, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Create infrastructure/cc_translate/adapters/ directory
        activeForm: Creating adapters directory
        status: in_progress
      - content: Create ClaudeCodeSessionAdapter for converting infrastructure to domain models
        activeForm: Creating session adapter
        status: pending
      - content: Create DiagramOutputAdapter for converting domain diagram to output format
        activeForm: Creating diagram output adapter
        status: pending
      - content: Update CLI commands to use adapters
        activeForm: Updating CLI commands
        status: pending
      - content: Update API endpoints to use adapters
        activeForm: Updating API endpoints
        status: pending
      - content: Test adapter integration
        activeForm: Testing adapter integration
        status: pending
- label: to_do_1_sub
  type: sub_diagram
  position: {x: 900, y: 100}
  props:
    sub_diagram_path: grouped/to_do_1.light.yaml
    execution_mode: sequential
- label: Update TODO 3
  type: db
  position: {x: 1100, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Move SessionAdapter from domain to infrastructure layer
        activeForm: Moving SessionAdapter to infrastructure
        status: in_progress
      - content: Update imports in domain layer to use moved adapter
        activeForm: Updating domain imports
        status: pending
      - content: Check and update CLI usage if needed
        activeForm: Checking CLI usage
        status: pending
      - content: Test the refactored adapter integration
        activeForm: Testing adapter integration
        status: pending
- label: to_do_3_sub
  type: sub_diagram
  position: {x: 1300, y: 100}
  props:
    sub_diagram_path: grouped/to_do_3.light.yaml
    execution_mode: sequential
- label: Update TODO 4
  type: db
  position: {x: 1500, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Move SessionAdapter from domain to infrastructure layer
        activeForm: Moving SessionAdapter to infrastructure
        status: completed
      - content: Update imports in domain layer to use moved adapter
        activeForm: Updating domain imports
        status: completed
      - content: Check and update CLI usage if needed
        activeForm: Checking CLI usage
        status: in_progress
      - content: Test the refactored adapter integration
        activeForm: Testing adapter integration
        status: pending
- label: to_do_5_sub
  type: sub_diagram
  position: {x: 1700, y: 100}
  props:
    sub_diagram_path: grouped/to_do_5.light.yaml
    execution_mode: sequential
- label: Update TODO 5
  type: db
  position: {x: 1900, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Move SessionAdapter from domain to infrastructure layer
        activeForm: Moving SessionAdapter to infrastructure
        status: completed
      - content: Update imports in domain layer to use moved adapter
        activeForm: Updating domain imports
        status: completed
      - content: Check and update CLI usage if needed
        activeForm: Checking CLI usage
        status: completed
      - content: Test the refactored adapter integration
        activeForm: Testing adapter integration
        status: in_progress
- label: to_do_6_sub
  type: sub_diagram
  position: {x: 2100, y: 100}
  props:
    sub_diagram_path: grouped/to_do_6.light.yaml
    execution_mode: sequential
- label: Update TODO 6
  type: db
  position: {x: 2300, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Remove infrastructure imports from domain translator
        activeForm: Removing infrastructure imports
        status: in_progress
      - content: Update translator to only accept SessionPort
        activeForm: Updating translator interface
        status: pending
      - content: Move adaptation logic to CLI layer
        activeForm: Moving adaptation to CLI
        status: pending
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: to_do_8_sub
  type: sub_diagram
  position: {x: 2500, y: 100}
  props:
    sub_diagram_path: grouped/to_do_8.light.yaml
    execution_mode: sequential
- label: Update TODO 7
  type: db
  position: {x: 2700, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Remove infrastructure imports from domain translator
        activeForm: Removing infrastructure imports
        status: completed
      - content: Update translator to only accept SessionPort
        activeForm: Updating translator interface
        status: completed
      - content: Move adaptation logic to CLI layer
        activeForm: Moving adaptation to CLI
        status: in_progress
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: to_do_9_sub
  type: sub_diagram
  position: {x: 2900, y: 100}
  props:
    sub_diagram_path: grouped/to_do_9.light.yaml
    execution_mode: sequential
- label: Update TODO 8
  type: db
  position: {x: 3100, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Move adaptation logic to CLI layer
        activeForm: Moving adaptation to CLI
        status: completed
      - content: Remove obsolete session_preprocessor.py with infrastructure imports
        activeForm: Removing obsolete preprocessor
        status: in_progress
      - content: Clean up imports in preprocess/__init__.py
        activeForm: Cleaning up imports
        status: pending
      - content: Update outdated comments in phase_coordinator
        activeForm: Updating comments
        status: pending
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: to_do_11_sub
  type: sub_diagram
  position: {x: 3300, y: 100}
  props:
    sub_diagram_path: grouped/to_do_11.light.yaml
    execution_mode: sequential
- label: Update TODO 9
  type: db
  position: {x: 3500, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Move adaptation logic to CLI layer
        activeForm: Moving adaptation to CLI
        status: completed
      - content: Remove obsolete session_preprocessor.py with infrastructure imports
        activeForm: Removing obsolete preprocessor
        status: completed
      - content: Clean up imports in preprocess/__init__.py
        activeForm: Cleaning up imports
        status: completed
      - content: Update outdated comments in phase_coordinator
        activeForm: Updating comments
        status: in_progress
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: to_do_12_sub
  type: sub_diagram
  position: {x: 3700, y: 100}
  props:
    sub_diagram_path: grouped/to_do_12.light.yaml
    execution_mode: sequential
- label: Update TODO 10
  type: db
  position: {x: 3900, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Update outdated comments in phase_coordinator
        activeForm: Updating comments
        status: completed
      - content: Replace ClaudeCodeTranslator with PhaseCoordinator in CLI
        activeForm: Replacing translator with coordinator
        status: in_progress
      - content: Remove translator.py
        activeForm: Removing translator
        status: pending
      - content: Update __init__.py exports
        activeForm: Updating exports
        status: pending
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: Update TODO 11
  type: db
  position: {x: 4100, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Update outdated comments in phase_coordinator
        activeForm: Updating comments
        status: completed
      - content: Replace ClaudeCodeTranslator with PhaseCoordinator in CLI
        activeForm: Replacing translator with coordinator
        status: completed
      - content: Remove translator.py
        activeForm: Removing translator
        status: in_progress
      - content: Update __init__.py exports
        activeForm: Updating exports
        status: pending
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: pending
- label: Update TODO 12
  type: db
  position: {x: 4300, y: 100}
  props:
    operation: write
    sub_type: memory
    query: UPDATE TODO LIST
    data:
      todos:
      - content: Update outdated comments in phase_coordinator
        activeForm: Updating comments
        status: completed
      - content: Replace ClaudeCodeTranslator with PhaseCoordinator in CLI
        activeForm: Replacing translator with coordinator
        status: completed
      - content: Remove translator.py
        activeForm: Removing translator
        status: completed
      - content: Update __init__.py exports
        activeForm: Updating exports
        status: completed
      - content: Test the clean architecture
        activeForm: Testing clean architecture
        status: in_progress
connections:
- {from: Start, to: Update TODO 1, content_type: raw_text}
- {from: Update TODO 1, to: prev_to_do_sub, content_type: raw_text}
- {from: prev_to_do_sub, to: Update TODO 2, content_type: raw_text}
- {from: Update TODO 2, to: to_do_1_sub, content_type: raw_text}
- {from: to_do_1_sub, to: Update TODO 3, content_type: raw_text}
- {from: Update TODO 3, to: to_do_3_sub, content_type: raw_text}
- {from: to_do_3_sub, to: Update TODO 4, content_type: raw_text}
- {from: Update TODO 4, to: to_do_5_sub, content_type: raw_text}
- {from: to_do_5_sub, to: Update TODO 5, content_type: raw_text}
- {from: Update TODO 5, to: to_do_6_sub, content_type: raw_text}
- {from: to_do_6_sub, to: Update TODO 6, content_type: raw_text}
- {from: Update TODO 6, to: to_do_8_sub, content_type: raw_text}
- {from: to_do_8_sub, to: Update TODO 7, content_type: raw_text}
- {from: Update TODO 7, to: to_do_9_sub, content_type: raw_text}
- {from: to_do_9_sub, to: Update TODO 8, content_type: raw_text}
- {from: Update TODO 8, to: to_do_11_sub, content_type: raw_text}
- {from: to_do_11_sub, to: Update TODO 9, content_type: raw_text}
- {from: Update TODO 9, to: to_do_12_sub, content_type: raw_text}
- {from: to_do_12_sub, to: Update TODO 10, content_type: raw_text}
- {from: Update TODO 10, to: Update TODO 11, content_type: raw_text}
- {from: Update TODO 11, to: Update TODO 12, content_type: raw_text}
metadata:
  conversion:
    total_nodes: 95
    total_connections: 94
    total_persons: 0
    node_types:
      start: 1
      person_job: 12
      db: 32
      api_job: 23
      code_job: 18
      diff_patch: 9
  deduplication:
    files_deduplicated: 3
    total_nodes_removed: 4
    deduplicated_files:
      /home/soryhyun/DiPeO/dipeo/domain/cc_translate/translator.py:
        original_count: 2
        kept_node: Read File 4
        removed_nodes:
        - Read File 10
      /home/soryhyun/DiPeO/apps/cli/src/dipeo_cli/commands/claude_code_command.py:
        original_count: 3
        kept_node: Read File 6
        removed_nodes:
        - Read File 12
        - Read File 13
      /home/soryhyun/DiPeO/dipeo/domain/cc_translate/phase_coordinator.py:
        original_count: 2
        kept_node: Read File 19
        removed_nodes:
        - Read File 22
  grouped: true
  original_nodes: 91
  sub_diagrams: 9
  extracted_todos: 12
  grouping_method: todo_updates_with_extraction
  post_processing:
    optimization:
      applied: true
      total_changes: 23
      nodes_removed: 4
      connections_modified: 8
persons:
  claude_code:
    service: anthropic
    model: claude-code
    api_key_id: APIKEY_CLAUDE
    system_prompt: You are Claude Code, an AI assistant helping with software development.
