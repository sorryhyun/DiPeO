"""
Avoid editing THIS FILE DIRECTLY.
Generated by backend conversions generation
Generated at: 2025-09-27T12:50:09.766306

Type conversion utilities between frontend and backend
"""

from __future__ import annotations

from typing import Any, Dict, List, Optional, Union
from datetime import datetime
from .enums import NodeType

# Node type mappings (snake_case to CONSTANT_CASE)
NODE_TYPE_MAP = {
    'api_job': 'API_JOB',
    'code_job': 'CODE_JOB',
    'condition': 'CONDITION',
    'db': 'DB',
    'diff_patch': 'DIFF_PATCH',
    'endpoint': 'ENDPOINT',
    'hook': 'HOOK',
    'integrated_api': 'INTEGRATED_API',
    'ir_builder': 'IR_BUILDER',
    'json_schema_validator': 'JSON_SCHEMA_VALIDATOR',
    'person_job': 'PERSON_JOB',
    'start': 'START',
    'sub_diagram': 'SUB_DIAGRAM',
    'template_job': 'TEMPLATE_JOB',
    'typescript_ast': 'TYPESCRIPT_AST',
    'user_response': 'USER_RESPONSE',
}
NODE_TYPE_REVERSE_MAP: Dict[NodeType, str] = {v: k for k, v in NODE_TYPE_MAP.items()}

# TypeScript to Python type conversions
TYPE_CONVERSIONS = {
    'string': 'str',
    'number': 'float',
    'boolean': 'bool',
    'any': 'Any',
    'unknown': 'Any',
    'null': 'None',
    'undefined': 'None',
    'void': 'None',
    'Date': 'datetime',
    'object': 'Dict[str, Any]',
}

# Field type mappings (for UI components)
FIELD_MAPPINGS = {
    'string': 'text',
    'number': 'number',
    'boolean': 'checkbox',
    'object': 'json',
    'array': 'list',
}

def ts_to_python_type(ts_type: str) -> str:
    """Convert TypeScript type to Python type."""
    return TYPE_CONVERSIONS.get(ts_type, ts_type)

def python_to_ts_type(py_type: str) -> str:
    """Convert Python type to TypeScript type."""
    reverse_map = {v: k for k, v in TYPE_CONVERSIONS.items()}
    return reverse_map.get(py_type, py_type)

def get_node_type_constant(snake_case: str) -> str:
    """Get the constant case node type from snake case."""
    return NODE_TYPE_MAP.get(snake_case, snake_case.upper())

def get_field_ui_type(field_type: str) -> str:
    """Get the UI component type for a field type."""
    return FIELD_MAPPINGS.get(field_type, 'text')

def node_kind_to_domain_type(kind: str) -> NodeType:
    try:
        return NODE_TYPE_MAP[kind]
    except KeyError as exc:
        raise ValueError(f"Unknown node kind: {kind}") from exc


def domain_type_to_node_kind(node_type: NodeType) -> str:
    try:
        return NODE_TYPE_REVERSE_MAP[node_type]
    except KeyError as exc:
        raise ValueError(f"Unknown node type: {node_type}") from exc

# Export utilities
__all__ = [
    'NODE_TYPE_MAP',
    'NODE_TYPE_REVERSE_MAP',
    'TYPE_CONVERSIONS',
    'FIELD_MAPPINGS',
    'ts_to_python_type',
    'python_to_ts_type',
    'get_node_type_constant',
    'get_field_ui_type',
    'node_kind_to_domain_type',
    'domain_type_to_node_kind',
]
