# Frontend Batch Generation V2
# Generates frontend files for multiple node types using sub_diagram nodes

version: light

nodes:
  - label: Start
    type: start
    position: {x: 50, y: 50}
    props:
      custom_data:
        message: Starting batch generation for frontend files

  # Code nodes to provide inputs for each sub_diagram
  - label: PersonJob Input
    type: code_job
    position: {x: 150, y: 100}
    props:
      language: python
      code: |
        result = {"node_spec_path": "person_job"}

  - label: Generate PersonJob
    type: sub_diagram
    position: {x: 300, y: 100}
    props:
      diagram_name: codegen/diagrams/frontend/generate_frontend_single
      diagram_format: light

  - label: SubDiagram Input
    type: code_job
    position: {x: 150, y: 200}
    props:
      language: python
      code: |
        result = {"node_spec_path": "sub_diagram"}

  - label: Generate SubDiagram
    type: sub_diagram
    position: {x: 300, y: 200}
    props:
      diagram_name: codegen/diagrams/frontend/generate_frontend_single
      diagram_format: light

  - label: CodeJob Input
    type: code_job
    position: {x: 150, y: 300}
    props:
      language: python
      code: |
        result = {"node_spec_path": "code_job"}

  - label: Generate CodeJob
    type: sub_diagram
    position: {x: 300, y: 300}
    props:
      diagram_name: codegen/diagrams/frontend/generate_frontend_single
      diagram_format: light

  - label: Summary
    type: code_job
    position: {x: 450, y: 200}
    props:
      language: python
      code: |
        result = {
          'message': 'Successfully generated frontend files',
          'nodes_processed': ['person_job', 'sub_diagram', 'code_job']
        }

  - label: End
    type: endpoint
    position: {x: 600, y: 200}
    props:
      save_to_file: false

connections:
  - from: Start
    to: PersonJob Input
  
  - from: PersonJob Input
    to: Generate PersonJob
  
  - from: Generate PersonJob
    to: SubDiagram Input
  
  - from: SubDiagram Input
    to: Generate SubDiagram
  
  - from: Generate SubDiagram
    to: CodeJob Input
  
  - from: CodeJob Input
    to: Generate CodeJob
  
  - from: Generate CodeJob
    to: Summary
  
  - from: Summary
    to: End