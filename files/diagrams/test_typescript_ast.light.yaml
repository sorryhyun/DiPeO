version: light
nodes:
  - label: Start
    type: start
    position: {x: 100, y: 100}
    props:
      trigger_mode: manual
      
  - label: TypeScript Code
    type: db
    position: {x: 300, y: 100}
    props:
      operation: read
      sub_type: file
      source_details: files/test_typescript_code.ts
        
  - label: Parse TypeScript
    type: typescript_ast
    position: {x: 500, y: 100}
    props:
      extractPatterns: ["interface", "type", "enum", "class"]
      includeJSDoc: false
      parseMode: module
      
  - label: Display Results
    type: person_job
    position: {x: 700, y: 100}
    props:
      person: Person 1
      default_prompt: |
        The TypeScript AST parser extracted the following:
        
        {{#if interfaces}}
        Interfaces ({{interfaces.length}}):
        {{#each interfaces}}
        - {{name}} with {{properties.length}} properties
        {{/each}}
        {{/if}}
        
        {{#if types}}
        Type Aliases ({{types.length}}):
        {{#each types}}
        - {{name}}: {{type}}
        {{/each}}
        {{/if}}
        
        {{#if enums}}
        Enums ({{enums.length}}):
        {{#each enums}}
        - {{name}} with {{members.length}} members
        {{/each}}
        {{/if}}
        
        {{#if classes}}
        Classes ({{classes.length}}):
        {{#each classes}}
        - {{name}} with {{properties.length}} properties and {{methods.length}} methods
        {{/each}}
        {{/if}}
        
        Please summarize what was extracted and explain how this TypeScript AST parser node could be useful for code generation workflows.
      max_iteration: 1
      
  - label: End
    type: endpoint
    position: {x: 900, y: 100}
    props:
      save_to_file: true
      file_format: md
      file_path: logs/typescript_ast_test.md
      
connections:
  - from: Start
    to: TypeScript Code
    
  - from: TypeScript Code
    to: Parse TypeScript
    content_type: raw_text
    label: source
    
  - from: Parse TypeScript
    to: Display Results
    content_type: object
    
  - from: Display Results
    to: End
    content_type: raw_text
    
persons:
  Person 1:
    service: openai
    model: gpt-4.1-mini
    api_key_id: APIKEY_52609F