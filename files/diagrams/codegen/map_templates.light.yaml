version: light
nodes:
  - label: Start
    type: start
    position: {x: 100, y: 200}
    props:
      trigger_mode: manual
      custom_data:
        spec_data: {}  # Normalized spec data from spec_ingestion
        mode: full     # Generation mode: full | models | nodes | minimal
        
  - label: Load Template Manifest
    type: db
    position: {x: 300, y: 200}
    props:
      operation: read
      sub_type: file
      file: files/codegen/manifests/codegen/templates.yaml
      
  - label: Parse Manifest
    type: code_job
    position: {x: 500, y: 200}
    props:
      functionName: parse_template_manifest
      code_type: python
      code: files/codegen/code/phase2/map_templates_helpers.py
            
  - label: Process Templates
    type: code_job
    position: {x: 700, y: 200}
    props:
      functionName: process_template_batch
      code_type: python
      code: files/codegen/code/phase2/map_templates_helpers.py
            
  - label: Render All Templates
    type: code_job
    position: {x: 900, y: 200}
    props:
      functionName: batch_render_templates
      code_type: python
      code: files/codegen/code/phase2/map_templates_helpers.py
            
  - label: Collect Results
    type: code_job
    position: {x: 1100, y: 200}
    props:
      functionName: collect_render_results
      code_type: python
      code: files/codegen/code/phase2/map_templates_helpers.py
            
  - label: End
    type: endpoint  
    position: {x: 1300, y: 200}
    props:
      save_to_file: false

connections:
  - from: Start
    to: Load Template Manifest
    content_type: object
    
  - from: Load Template Manifest
    to: Parse Manifest
    content_type: raw_text
    label: manifest_content
    
  - from: Start
    to: Parse Manifest
    content_type: object
    label: mode
    
  - from: Parse Manifest
    to: Process Templates
    content_type: object
    
  - from: Start
    to: Process Templates
    content_type: object
    label: spec_data
    
  - from: Process Templates
    to: Render All Templates
    content_type: object
    
  - from: Render All Templates
    to: Collect Results
    content_type: object
    
  - from: Collect Results
    to: End
    content_type: object