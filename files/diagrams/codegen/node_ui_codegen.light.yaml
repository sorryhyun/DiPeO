version: light
nodes:
- label: Start
  type: start
  position: {x: 373, y: -278}
  props:
    trigger_mode: manual
- label: Load Node Spec
  type: code_job
  position: {x: 703, y: -296}
  props:
    functionName: load_node_spec
    code_type: python
    code: files/codegen/code/codegen.py
- label: Validate Spec
  type: json_schema_validator
  position: {x: 1050, y: -296}
  props:
    schema_path: files/codegen/schemas/node_specification.schema.json
    strict_mode: true
- label: Generate All Files
  type: code_job
  position: {x: 1400, y: -296}
  props:
    functionName: generate_all
    code_type: python
    code: files/codegen/code/codegen.py
- label: Generate Report
  type: person_job
  position: {x: 1750, y: -296}
  props:
    person: NodeReporter
    default_prompt: |
      Generate a summary of the node UI code generation for {{node_type}}:

      Generated files:
      {{#each files_generated}}
      - {{this}}
      {{/each}}

      Result: {{message}}

      Provide a brief summary including:
      1. What was successfully generated
      2. Any manual registration steps needed
      3. Next steps for testing the new node
    max_iteration: 1
- label: End
  type: endpoint
  position: {x: 2100, y: -296}
  props:
    save_to_file: false
connections:
- from: Start
  to: Load Node Spec
  content_type: object
- from: Load Node Spec
  to: Validate Spec
  content_type: object
- from: Validate Spec
  to: Generate All Files
  content_type: object
- from: Generate All Files
  to: Generate Report
  content_type: object
- from: Generate Report
  to: End
  content_type: raw_text
persons:
  NodeReporter:
    service: openai
    model: gpt-4.1-mini
    api_key_id: APIKEY_52609F
