# Test diagram for SEAC packing: spread feature
version: light

nodes:
  - label: Start
    type: start
    position: {x: 50, y: 200}
    props:
      custom_data: "test_spread_feature"

  # Create config dict to be spread
  - label: Create Config
    type: code_job
    position: {x: 250, y: 200}
    props:
      language: python
      code: |
        def main(default):
            # Create a config dict with multiple parameters
            config = {
                'timeout': 30,
                'max_retries': 3,
                'debug_mode': True,
                'api_key': 'test-key-123'
            }
            return config

  # Process with spread - config fields become direct inputs
  - label: Process With Spread
    type: code_job
    position: {x: 450, y: 200}
    props:
      language: python
      code: |
        def main(timeout=None, max_retries=None, debug_mode=None, api_key=None, **kwargs):
            # These should be directly available as named parameters
            result = {
                'received_timeout': timeout,
                'received_max_retries': max_retries,
                'received_debug_mode': debug_mode,
                'received_api_key': api_key,
                'extra_kwargs': kwargs
            }
            print(f"Spread worked! timeout={timeout}, max_retries={max_retries}, debug_mode={debug_mode}, api_key={api_key}")
            return result

  - label: End
    type: endpoint
    position: {x: 650, y: 200}
    props:
      save_to_file: false

connections:
  # Pass config normally
  - {from: Start, to: Create Config, content_type: object}
  
  # Use spread to unpack config dict into individual parameters
  - {from: Create Config, to: Process With Spread, content_type: object, packing: spread}
  
  - {from: Process With Spread, to: End}