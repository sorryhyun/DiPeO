# Generate JSON Schemas and Pydantic validation models
# This consolidated diagram generates both JSON schemas from TypeScript
# and Pydantic models from those schemas in one flow
version: light

nodes:
  - label: Start
    type: start
    position: {x: 100, y: 100}
    props:
      custom_data:
        message: Starting validation model generation pipeline

  - label: Generate JSON Schemas
    type: code_job
    position: {x: 300, y: 100}
    props:
      language: python
      filePath: projects/codegen/code/shared/generators/json_schema_generator.py
      functionName: main

  - label: Generate Pydantic Models
    type: code_job
    position: {x: 500, y: 100}
    props:
      language: python
      filePath: projects/codegen/code/shared/generators/pydantic_generator.py
      functionName: main

  - label: End
    type: endpoint
    position: {x: 700, y: 100}
    props:
      save_to_file: false

connections:
  - {from: Start, to: Generate JSON Schemas}

  # Pass JSON schema results to Pydantic generator
  - {from: Generate JSON Schemas, to: Generate Pydantic Models, label: schemas, content_type: object}

  - {from: Generate Pydantic Models, to: End}
