import{r as o,c as m,j as e,E as g,u as h,G as j,W as d}from"./index-D2zW4HEo.js";import{S as f}from"./StatusBadge-9d4oukyV.js";function p(){const[s,t]=o.useState(()=>typeof window<"u"&&window.oai?.widget?.getState?window.oai.widget.getState():null);return o.useEffect(()=>{if(!s){let a=100;const n=2e3,u=10;let r=0,i;const c=()=>{if(window.oai?.widget?.getState){const l=window.oai.widget.getState();if(l){t(l);return}}r++,r<u&&(a=Math.min(a*1.5,n),i=setTimeout(c,a))};return c(),()=>{i&&clearTimeout(i)}}},[s]),s}function E(){return p()}function N(){const s=E(),{data:t,loading:a,error:n}=h(j,{executionId:s?.executionId},{skip:!s?.executionId,refetchInterval:5e3});return s?e.jsx(d,{title:"Execution Results",error:n,loading:a&&!t,children:t?.getExecution&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{status:t.getExecution.status}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.getExecution.diagram_id||"Unknown Diagram"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.getExecution.id})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Started:"}),e.jsx("span",{className:"font-mono text-gray-900",children:t.getExecution.started_at?new Date(t.getExecution.started_at).toLocaleString():"N/A"})]}),t.getExecution.ended_at&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Completed:"}),e.jsx("span",{className:"font-mono text-gray-900",children:new Date(t.getExecution.ended_at).toLocaleString()})]})]}),t.getExecution.error&&e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-700 mb-2",children:"Error"}),e.jsx("pre",{className:"text-xs text-red-600 overflow-x-auto whitespace-pre-wrap",children:t.getExecution.error})]}),t.getExecution.metrics&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Metrics"}),e.jsx("pre",{className:"bg-gray-50 rounded-lg p-3 text-xs overflow-x-auto",children:JSON.stringify(t.getExecution.metrics,null,2)})]}),t.getExecution.llm_usage&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"LLM Usage"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Input Tokens:"}),e.jsx("span",{className:"font-mono",children:t.getExecution.llm_usage.input||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Output Tokens:"}),e.jsx("span",{className:"font-mono",children:t.getExecution.llm_usage.output||0})]}),t.getExecution.llm_usage.cached!==null&&t.getExecution.llm_usage.cached!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cached Tokens:"}),e.jsx("span",{className:"font-mono",children:t.getExecution.llm_usage.cached})]}),t.getExecution.llm_usage.total!==null&&t.getExecution.llm_usage.total!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),e.jsxs("span",{className:"font-mono",children:["$",t.getExecution.llm_usage.total.toFixed(4)]})]})]})]})]})}):e.jsx(d,{children:e.jsx("div",{className:"text-sm text-gray-500",children:"Waiting for execution data..."})})}const x=document.getElementById("execution-results-root");x&&m.createRoot(x).render(e.jsx(g,{children:e.jsx(N,{})}));
//# sourceMappingURL=execution-results-CG1kH-7L.js.map
