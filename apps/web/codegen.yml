# GraphQL Code Generation Configuration

overwrite: true
schema: "../server/schema.graphql"
documents:
  # - "src/__generated__/queries/all-queries.ts"  # Future: Use TypeScript queries when schema is updated
  - "src/**/*.{ts,tsx}"
generates:
  src/__generated__/graphql.tsx:
    plugins:
      - typescript
      - typescript-operations
      - typescript-react-apollo
    config:
      # Use branded types from @dipeo/models
      scalars:
        NodeID: "@dipeo/models#NodeID"
        HandleID: "@dipeo/models#HandleID"
        ArrowID: "@dipeo/models#ArrowID"
        PersonID: "@dipeo/models#PersonID"
        ApiKeyID: "@dipeo/models#ApiKeyID"
        ExecutionID: "@dipeo/models#ExecutionID"
        DiagramID: "@dipeo/models#DiagramID"
      # Import enums from @dipeo/models
      enumsAsTypes: false
      enumValues:
        NodeType: "@dipeo/models#NodeType"
        HandleDirection: "@dipeo/models#HandleDirection"
        HandleLabel: "@dipeo/models#HandleLabel"
        DataType: "@dipeo/models#DataType"
        LLMService: "@dipeo/models#LLMService"
        DiagramFormat: "@dipeo/models#DiagramFormat"
        Status: "@dipeo/models#Status"
      # Skip generating TypeScript types for enums
      skipTypename: false
      # Use proper imports
      useTypeImports: true
      # Keep all names as-is from schema (including snake_case field names)
      namingConvention:
        enumValues: keep
        typeNames: keep
        fieldNames: keep
      # Generate React hooks
      withHooks: true
      # Generate HOCs for components
      withHOC: false
      withComponent: false
      apolloClientVersion: 3
      avoidOptionals: false
      withResultType: true
      addDocumentNodeToOperations: true

      possibleTypes:
        NodeDataUnion:
          - StartNodeData
          - PersonJobNodeData
          - ConditionNodeData
          - JobNodeData
          - EndpointNodeData
          - DBNodeData
          - UserResponseNodeData
          - NotionNodeData
          - PersonBatchJobNodeData
        DiagramOperationResult:
          - Diagram
          - OperationError
        ExecutionOperationResult:
          - ExecutionState
          - OperationError
