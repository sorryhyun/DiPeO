query GetExecution($id: ID!) {
  execution(id: $id) {
    id
    status
    diagram_id
    started_at
    ended_at
    node_states
    node_outputs
    variables
    token_usage {
      input
      output
      cached
    }
    error
    duration_seconds
    is_active
  }
}

query ListExecutions($filter: ExecutionFilterInput, $limit: Int, $offset: Int) {
  executions(filter: $filter, limit: $limit, offset: $offset) {
    id
    status
    diagram_id
    started_at
    ended_at
    is_active
    duration_seconds
  }
}

subscription ExecutionUpdates($executionId: ID!) {
  execution_updates(execution_id: $executionId) {
    execution_id
    event_type
    data
    timestamp
  }
}

subscription NodeUpdates($executionId: ID!, $nodeId: String) {
  node_updates(execution_id: $executionId, node_id: $nodeId)
}

subscription InteractivePrompts($executionId: ID!) {
  interactive_prompts(execution_id: $executionId)
}

mutation ControlExecution($input: ExecutionControlInput!) {
  control_execution(input: $input) {
    success
    execution {
      id
      status
    }
    message
    error
  }
}

mutation SendInteractiveResponse($input: InteractiveResponseInput!) {
  send_interactive_response(input: $input) {
    success
    execution {
      id
      status
      node_states
    }
    message
    error
  }
}

query ExecutionOrder($executionId: ID!) {
  execution_order(execution_id: $executionId)
}
