# Execution Operations

mutation ExecuteDiagram($data: ExecuteDiagramInput!) {
    executeDiagram(data: $data) {
        success
        execution {
            id
            status
            diagramId
            startedAt
        }
        message
        error
    }
}

mutation ConvertDiagram($content: JSONScalar!, $targetFormat: DiagramFormat!, $includeMetadata: Boolean!) {
    convertDiagram(content: $content, targetFormat: $targetFormat, includeMetadata: $includeMetadata) {
        success
        message
        error
        content
        format
        filename
    }
}

mutation ControlExecution($data: ExecutionControlInput!) {
    controlExecution(data: $data) {
        success
        execution {
            id
            status
        }
        message
        error
    }
}

mutation SubmitInteractiveResponse($data: InteractiveResponseInput!) {
    submitInteractiveResponse(data: $data) {
        success
        execution {
            id
            status
        }
        message
        error
    }
}

subscription ExecutionUpdates($executionId: ExecutionID!) {
    executionUpdates(executionId: $executionId) {
        id
        status
        diagram_id
        started_at
        ended_at
        node_states
        node_outputs
        variables
        token_usage {
            input
            output
            total
        }
        error
        is_active
        duration_seconds
    }
}

subscription NodeUpdates($executionId: ExecutionID!, $nodeTypes: [NodeType!]) {
    nodeUpdates(executionId: $executionId, nodeTypes: $nodeTypes) {
        executionId
        nodeId
        nodeType
        status
        progress
        output
        error
        tokensUsed
        timestamp
    }
}

subscription InteractivePrompts($executionId: ExecutionID!) {
    interactivePrompts(executionId: $executionId) {
        executionId
        nodeId
        prompt
        timeoutSeconds
        timestamp
    }
}