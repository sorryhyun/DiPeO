# DiPeO MCP Server OAuth 2.1 Authentication Configuration
# Copy this file to .env and configure your OAuth settings

# =============================================================================
# Authentication Mode
# =============================================================================

# Enable/disable authentication (default: true)
# Set to 'false' to disable all authentication (development only)
MCP_AUTH_ENABLED=true

# Require authentication (default: false)
# If true: All requests must be authenticated
# If false: Authentication is optional (validates if provided)
MCP_AUTH_REQUIRED=false

# =============================================================================
# API Key Authentication (Simple)
# =============================================================================

# Enable API key authentication (default: true)
# Clients can authenticate using X-API-Key header
MCP_API_KEY_ENABLED=true

# Comma-separated list of valid API keys
# Example: MCP_API_KEYS=dev-key-123,prod-key-456
MCP_API_KEYS=your-api-key-here

# =============================================================================
# OAuth 2.1 JWT Authentication (Production)
# =============================================================================

# Enable JWT token validation (default: true)
MCP_JWT_ENABLED=true

# JWT algorithm (default: RS256)
# Options: HS256, HS384, HS512 (symmetric), RS256, RS384, RS512 (asymmetric)
MCP_JWT_ALGORITHM=RS256

# For HS256/HS384/HS512 (symmetric) - shared secret
# MCP_JWT_SECRET=your-jwt-secret-here

# For RS256/RS384/RS512 (asymmetric) - public key
# Option 1: Inline public key
# MCP_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMII...\n-----END PUBLIC KEY-----"

# Option 2: Path to public key file
# MCP_JWT_PUBLIC_KEY_FILE=/path/to/public-key.pem

# Expected JWT audience (aud claim)
# MCP_JWT_AUDIENCE=https://your-mcp-server.example.com

# Expected JWT issuer (iss claim)
# MCP_JWT_ISSUER=https://your-oauth-provider.example.com

# =============================================================================
# OAuth 2.1 Authorization Server Configuration
# =============================================================================

# OAuth authorization server base URL
# Required for MCP clients to discover OAuth endpoints
# MCP_OAUTH_SERVER_URL=https://your-oauth-provider.example.com

# OAuth endpoints (optional - defaults to {server_url}/{endpoint})
# MCP_OAUTH_AUTHORIZATION_ENDPOINT=https://your-oauth-provider.example.com/authorize
# MCP_OAUTH_TOKEN_ENDPOINT=https://your-oauth-provider.example.com/token
# MCP_OAUTH_REGISTRATION_ENDPOINT=https://your-oauth-provider.example.com/register

# JWKS URI for key discovery (optional)
# MCP_OAUTH_JWKS_URI=https://your-oauth-provider.example.com/.well-known/jwks.json

# =============================================================================
# Example Configurations
# =============================================================================

# Example 1: Development with API Key
# MCP_AUTH_ENABLED=true
# MCP_AUTH_REQUIRED=false
# MCP_API_KEY_ENABLED=true
# MCP_API_KEYS=dev-key-123
# MCP_JWT_ENABLED=false

# Example 2: Production with Auth0
# MCP_AUTH_ENABLED=true
# MCP_AUTH_REQUIRED=true
# MCP_JWT_ENABLED=true
# MCP_JWT_ALGORITHM=RS256
# MCP_JWT_PUBLIC_KEY_FILE=/path/to/auth0-public-key.pem
# MCP_JWT_AUDIENCE=https://your-mcp-server.example.com
# MCP_JWT_ISSUER=https://your-tenant.auth0.com/
# MCP_OAUTH_SERVER_URL=https://your-tenant.auth0.com
# MCP_OAUTH_JWKS_URI=https://your-tenant.auth0.com/.well-known/jwks.json

# Example 3: Production with Google OAuth
# MCP_AUTH_ENABLED=true
# MCP_AUTH_REQUIRED=true
# MCP_JWT_ENABLED=true
# MCP_JWT_ALGORITHM=RS256
# MCP_JWT_ISSUER=https://accounts.google.com
# MCP_OAUTH_SERVER_URL=https://accounts.google.com
# MCP_OAUTH_AUTHORIZATION_ENDPOINT=https://accounts.google.com/o/oauth2/v2/auth
# MCP_OAUTH_TOKEN_ENDPOINT=https://oauth2.googleapis.com/token
# MCP_OAUTH_JWKS_URI=https://www.googleapis.com/oauth2/v3/certs

# Example 4: Hybrid - Optional auth with both API key and JWT
# MCP_AUTH_ENABLED=true
# MCP_AUTH_REQUIRED=false
# MCP_API_KEY_ENABLED=true
# MCP_API_KEYS=dev-key-123,prod-key-456
# MCP_JWT_ENABLED=true
# MCP_JWT_ALGORITHM=RS256
# MCP_JWT_PUBLIC_KEY_FILE=/path/to/public-key.pem
# MCP_JWT_AUDIENCE=https://mcp.example.com
# MCP_JWT_ISSUER=https://auth.example.com

# Example 5: MCP Client + Local (No Authentication)
# Simplified setup for local development and MCP client integration
# without OAuth complexity. Only use for trusted environments.
# MCP_AUTH_ENABLED=false
# MCP_CLIENT_ORIGINS=https://your-mcp-client.com
# ENVIRONMENT=development
