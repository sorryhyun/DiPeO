version: light

persons:
  DecisionMaker:
    service: claude-code
    model: claude-code
    api_key_id: APIKEY_CLAUDE

nodes:
  - label: Start
    type: start
    position: {x: 100, y: 200}
    props:
      trigger_mode: manual
      custom_data:
        test_code: |
          def hello():
              print("Hello, World!")
              return 42

  - label: Quality Check
    type: condition
    position: {x: 400, y: 200}
    props:
      condition_type: llm_decision
      person: DecisionMaker
      memorize_to: "GOLDFISH"
      judge_by: |
        Evaluate this code for quality:
        
        ```python
        {{test_code}}
        ```
        
        Check if the code:
        1. Is actual Python code (not explanatory text)
        2. Has proper syntax
        3. Contains a function definition
        
        Respond with YES if all criteria are met, NO otherwise.

  - label: Good Code
    type: endpoint
    position: {x: 700, y: 100}
    props:
      file_format: txt
      save_to_file: false

  - label: Bad Code
    type: endpoint
    position: {x: 700, y: 300}
    props:
      file_format: txt
      save_to_file: false

connections:
  - {from: Start, to: Quality Check, label: test_code}
  - {from: Quality Check_condtrue, to: Good Code}
  - {from: Quality Check_condfalse, to: Bad Code}